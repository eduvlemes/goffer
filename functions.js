const path = 'http://127.0.0.1:5500/assets';
const customizer = [
  {
    productId: 367724086,
    title: 'Personalize sua chocker!',
    customizations: [
      {
        title: 'Pingente 1',
        type: 'required',
        message: 'Escolha um pingente para prosseguir',
        enableOnVariants: [],
        options: [
          { label: '1', image: `${path}/pingente-1.png`, enabled: true },
          { label: '2', image: `${path}/pingente-2.png`, enabled: true },
          { label: '3', image: `${path}/pingente-3.png`, enabled: true },
          { label: '4', image: `${path}/pingente-4.png`, enabled: true },
          { label: '5', image: `${path}/pingente-5.png`, enabled: true },
          { label: '6', image: `${path}/pingente-6.png`, enabled: true },
          { label: '7', image: `${path}/pingente-7.png`, enabled: true },
          { label: '8', image: `${path}/pingente-8.png`, enabled: true },
          { label: '9', image: `${path}/pingente-9.png`, enabled: true },
          { label: '10', image: `${path}/pingente-10.png`, enabled: true },
          { label: '11', image: `${path}/pingente-11.png`, enabled: true },
          { label: '12', image: `${path}/pingente-12.png`, enabled: true },
          { label: '13', image: `${path}/pingente-13.png`, enabled: true },
          { label: '14', image: `${path}/pingente-14.png`, enabled: true },
          { label: '15', image: `${path}/pingente-15.png`, enabled: true },
          { label: '16', image: `${path}/pingente-16.png`, enabled: true },
          { label: '17', image: `${path}/pingente-17.png`, enabled: true },
          { label: '18', image: `${path}/pingente-18.png`, enabled: true },
          { label: '19', image: `${path}/pingente-19.png`, enabled: true },
          { label: '20', image: `${path}/pingente-20.png`, enabled: true },
          { label: '21', image: `${path}/pingente-21.png`, enabled: true },
          { label: '22', image: `${path}/pingente-22.png`, enabled: true },
          { label: '23', image: `${path}/pingente-23.png`, enabled: true },
          { label: '24', image: `${path}/pingente-24.png`, enabled: true },
          { label: '25', image: `${path}/pingente-25.png`, enabled: true },
          { label: '26', image: `${path}/pingente-26.png`, enabled: true },
          { label: '27', image: `${path}/pingente-27.png`, enabled: true },
          { label: '28', image: `${path}/pingente-28.png`, enabled: true },
          { label: '29', image: `${path}/pingente-29.png`, enabled: true },
          { label: '30', image: `${path}/pingente-30.png`, enabled: true },
          { label: '31', image: `${path}/pingente-31.png`, enabled: true },
          { label: '32', image: `${path}/pingente-32.png`, enabled: true },
          { label: '33', image: `${path}/pingente-33.png`, enabled: true },
          { label: '34', image: `${path}/pingente-34.png`, enabled: true },
          { label: '35', image: `${path}/pingente-35.png`, enabled: true },
          { label: '36', image: `${path}/pingente-36.png`, enabled: true },
          { label: '37', image: `${path}/pingente-37.png`, enabled: true },
          { label: '38', image: `${path}/pingente-38.png`, enabled: true },
          { label: '39', image: `${path}/pingente-39.png`, enabled: true },
          { label: '40', image: `${path}/pingente-40.png`, enabled: true },
          { label: '41', image: `${path}/pingente-41.png`, enabled: true },
          { label: '42', image: `${path}/pingente-42.png`, enabled: true },
          { label: '43', image: `${path}/pingente-43.png`, enabled: true },
          { label: '44', image: `${path}/pingente-44.png`, enabled: true },
          { label: '45', image: `${path}/pingente-45.png`, enabled: true },
          { label: '46', image: `${path}/pingente-46.png`, enabled: true },
          { label: '47', image: `${path}/pingente-47.png`, enabled: true },
          { label: '48', image: `${path}/pingente-48.png`, enabled: true },
          { label: '49', image: `${path}/pingente-49.png`, enabled: true },
          { label: '50', image: `${path}/pingente-50.png`, enabled: true },
          { label: '51', image: `${path}/pingente-51.png`, enabled: true },
          { label: '52', image: `${path}/pingente-52.png`, enabled: true },
          { label: '53', image: `${path}/pingente-53.png`, enabled: true },
          { label: '54', image: `${path}/pingente-54.png`, enabled: true },
          { label: '55', image: `${path}/pingente-55.png`, enabled: true },
          { label: '56', image: `${path}/pingente-56.png`, enabled: true }
        ]
      },
      {
        title: 'Pingente 2',
        type: 'required',
        message: 'Escolha um pingente para prosseguir',
        enableOnVariants: [14005496,14005497],
        options: [
          { label: '1', image: `${path}/pingente-1.png`, enabled: true },
          { label: '2', image: `${path}/pingente-2.png`, enabled: true },
          { label: '3', image: `${path}/pingente-3.png`, enabled: true },
          { label: '4', image: `${path}/pingente-4.png`, enabled: true },
          { label: '5', image: `${path}/pingente-5.png`, enabled: true },
          { label: '6', image: `${path}/pingente-6.png`, enabled: true },
          { label: '7', image: `${path}/pingente-7.png`, enabled: true },
          { label: '8', image: `${path}/pingente-8.png`, enabled: true },
          { label: '9', image: `${path}/pingente-9.png`, enabled: true },
          { label: '10', image: `${path}/pingente-10.png`, enabled: true },
          { label: '11', image: `${path}/pingente-11.png`, enabled: true },
          { label: '12', image: `${path}/pingente-12.png`, enabled: true },
          { label: '13', image: `${path}/pingente-13.png`, enabled: true },
          { label: '14', image: `${path}/pingente-14.png`, enabled: true },
          { label: '15', image: `${path}/pingente-15.png`, enabled: true },
          { label: '16', image: `${path}/pingente-16.png`, enabled: true },
          { label: '17', image: `${path}/pingente-17.png`, enabled: true },
          { label: '18', image: `${path}/pingente-18.png`, enabled: true },
          { label: '19', image: `${path}/pingente-19.png`, enabled: true },
          { label: '20', image: `${path}/pingente-20.png`, enabled: true },
          { label: '21', image: `${path}/pingente-21.png`, enabled: true },
          { label: '22', image: `${path}/pingente-22.png`, enabled: true },
          { label: '23', image: `${path}/pingente-23.png`, enabled: true },
          { label: '24', image: `${path}/pingente-24.png`, enabled: true },
          { label: '25', image: `${path}/pingente-25.png`, enabled: true },
          { label: '26', image: `${path}/pingente-26.png`, enabled: true },
          { label: '27', image: `${path}/pingente-27.png`, enabled: true },
          { label: '28', image: `${path}/pingente-28.png`, enabled: true },
          { label: '29', image: `${path}/pingente-29.png`, enabled: true },
          { label: '30', image: `${path}/pingente-30.png`, enabled: true },
          { label: '31', image: `${path}/pingente-31.png`, enabled: true },
          { label: '32', image: `${path}/pingente-32.png`, enabled: true },
          { label: '33', image: `${path}/pingente-33.png`, enabled: true },
          { label: '34', image: `${path}/pingente-34.png`, enabled: true },
          { label: '35', image: `${path}/pingente-35.png`, enabled: true },
          { label: '36', image: `${path}/pingente-36.png`, enabled: true },
          { label: '37', image: `${path}/pingente-37.png`, enabled: true },
          { label: '38', image: `${path}/pingente-38.png`, enabled: true },
          { label: '39', image: `${path}/pingente-39.png`, enabled: true },
          { label: '40', image: `${path}/pingente-40.png`, enabled: true },
          { label: '41', image: `${path}/pingente-41.png`, enabled: true },
          { label: '42', image: `${path}/pingente-42.png`, enabled: true },
          { label: '43', image: `${path}/pingente-43.png`, enabled: true },
          { label: '44', image: `${path}/pingente-44.png`, enabled: true },
          { label: '45', image: `${path}/pingente-45.png`, enabled: true },
          { label: '46', image: `${path}/pingente-46.png`, enabled: true },
          { label: '47', image: `${path}/pingente-47.png`, enabled: true },
          { label: '48', image: `${path}/pingente-48.png`, enabled: true },
          { label: '49', image: `${path}/pingente-49.png`, enabled: true },
          { label: '50', image: `${path}/pingente-50.png`, enabled: true },
          { label: '51', image: `${path}/pingente-51.png`, enabled: true },
          { label: '52', image: `${path}/pingente-52.png`, enabled: true },
          { label: '53', image: `${path}/pingente-53.png`, enabled: true },
          { label: '54', image: `${path}/pingente-54.png`, enabled: true },
          { label: '55', image: `${path}/pingente-55.png`, enabled: true },
          { label: '56', image: `${path}/pingente-56.png`, enabled: true }
        ]
      },
      {
        title: 'Pingente 3',
        type: 'required',
        message: 'Escolha um pingente para prosseguir',
        enableOnVariants: [14005497],
        options: [
          { label: '1', image: `${path}/pingente-1.png`, enabled: true },
          { label: '2', image: `${path}/pingente-2.png`, enabled: true },
          { label: '3', image: `${path}/pingente-3.png`, enabled: true },
          { label: '4', image: `${path}/pingente-4.png`, enabled: true },
          { label: '5', image: `${path}/pingente-5.png`, enabled: true },
          { label: '6', image: `${path}/pingente-6.png`, enabled: true },
          { label: '7', image: `${path}/pingente-7.png`, enabled: true },
          { label: '8', image: `${path}/pingente-8.png`, enabled: true },
          { label: '9', image: `${path}/pingente-9.png`, enabled: true },
          { label: '10', image: `${path}/pingente-10.png`, enabled: true },
          { label: '11', image: `${path}/pingente-11.png`, enabled: true },
          { label: '12', image: `${path}/pingente-12.png`, enabled: true },
          { label: '13', image: `${path}/pingente-13.png`, enabled: true },
          { label: '14', image: `${path}/pingente-14.png`, enabled: true },
          { label: '15', image: `${path}/pingente-15.png`, enabled: true },
          { label: '16', image: `${path}/pingente-16.png`, enabled: true },
          { label: '17', image: `${path}/pingente-17.png`, enabled: true },
          { label: '18', image: `${path}/pingente-18.png`, enabled: true },
          { label: '19', image: `${path}/pingente-19.png`, enabled: true },
          { label: '20', image: `${path}/pingente-20.png`, enabled: true },
          { label: '21', image: `${path}/pingente-21.png`, enabled: true },
          { label: '22', image: `${path}/pingente-22.png`, enabled: true },
          { label: '23', image: `${path}/pingente-23.png`, enabled: true },
          { label: '24', image: `${path}/pingente-24.png`, enabled: true },
          { label: '25', image: `${path}/pingente-25.png`, enabled: true },
          { label: '26', image: `${path}/pingente-26.png`, enabled: true },
          { label: '27', image: `${path}/pingente-27.png`, enabled: true },
          { label: '28', image: `${path}/pingente-28.png`, enabled: true },
          { label: '29', image: `${path}/pingente-29.png`, enabled: true },
          { label: '30', image: `${path}/pingente-30.png`, enabled: true },
          { label: '31', image: `${path}/pingente-31.png`, enabled: true },
          { label: '32', image: `${path}/pingente-32.png`, enabled: true },
          { label: '33', image: `${path}/pingente-33.png`, enabled: true },
          { label: '34', image: `${path}/pingente-34.png`, enabled: true },
          { label: '35', image: `${path}/pingente-35.png`, enabled: true },
          { label: '36', image: `${path}/pingente-36.png`, enabled: true },
          { label: '37', image: `${path}/pingente-37.png`, enabled: true },
          { label: '38', image: `${path}/pingente-38.png`, enabled: true },
          { label: '39', image: `${path}/pingente-39.png`, enabled: true },
          { label: '40', image: `${path}/pingente-40.png`, enabled: true },
          { label: '41', image: `${path}/pingente-41.png`, enabled: true },
          { label: '42', image: `${path}/pingente-42.png`, enabled: true },
          { label: '43', image: `${path}/pingente-43.png`, enabled: true },
          { label: '44', image: `${path}/pingente-44.png`, enabled: true },
          { label: '45', image: `${path}/pingente-45.png`, enabled: true },
          { label: '46', image: `${path}/pingente-46.png`, enabled: true },
          { label: '47', image: `${path}/pingente-47.png`, enabled: true },
          { label: '48', image: `${path}/pingente-48.png`, enabled: true },
          { label: '49', image: `${path}/pingente-49.png`, enabled: true },
          { label: '50', image: `${path}/pingente-50.png`, enabled: true },
          { label: '51', image: `${path}/pingente-51.png`, enabled: true },
          { label: '52', image: `${path}/pingente-52.png`, enabled: true },
          { label: '53', image: `${path}/pingente-53.png`, enabled: true },
          { label: '54', image: `${path}/pingente-54.png`, enabled: true },
          { label: '55', image: `${path}/pingente-55.png`, enabled: true },
          { label: '56', image: `${path}/pingente-56.png`, enabled: true }
        ]
      },
      
      
      
    ]
  }
]

$(document).ready(function() {
  if($('.pagina-produto').length > 0){
    let q = customizer.filter(item => item.productId === parseInt(window.PRODUTO_ID));
    if(q.length > 0){
      $('body').on('click','[data-variacao-id]', function(){
        let variacaoId = $(this).data('variacao-id');
        $('#customizer .customization').each(function() {
          const $custom = $(this);
          const hasEnabledClass = $custom.hasClass('enabled-all') || $custom.hasClass(`enabled-${variacaoId}`);
          if (hasEnabledClass) {
            $custom.removeClass('hide');
            $custom.find('.option.selected').removeClass('selected');
            atualizarSelecionados();
          } else {
            $custom.addClass('hide');
          }
        });
      });
      $('.principal .acoes-produto').first().before('<div id="customizer"><div class="titulo">' + q[0].title + '</div><div class="customizer-content"></div></div>');
      q[0].customizations.forEach(customization => {
            let optionsHtml = customization.options.map(option => {
              let disabledClass = option.enabled === false ? 'disabled' : '';
              if (option.image && option.image.trim() !== '') {
                return `<div class="option ${disabledClass}" data-label="${option.label}" data-image="${option.image}"><img src="${option.image}" alt="${option.label}" class="option-image" /> ${option.label}</div>`;
              } else {
                return `<div class="option ${disabledClass}" data-label="${option.label}">${option.label}</div>`;
              }
            }).join('');
        let enabledClasses = customization.enableOnVariants.map(v => `enabled-${v}`).join(' ');
        let customizationHtml = `
          <div class="customization ${customization.enableOnVariants.length > 0 ? 'hide' : 'enabled-all'} ${enabledClasses}">
            <div class="customization-title">${customization.title}</div>
            <div class="customization-options">${optionsHtml}</div>
          </div>
        `;
        $('#customizer .customizer-content').append(customizationHtml);
      });
      // Adiciona a div de opções selecionadas
      $('#customizer').append('<div id="selected-options"><h3>Opções Selecionadas</h3><div class="selected-list"></div></div>');
      // Evento para selecionar opção
      $('#customizer .option').not('.disabled').on('click', function() {
        let $this = $(this);
        let label = $this.data('label');
        let image = $this.data('image');
        // Remove seleção anterior do mesmo grupo
        $this.closest('.customization-options').find('.option').removeClass('selected');
        $this.addClass('selected');
        atualizarSelecionados();
      });
      function atualizarSelecionados() {
        let selecionados = [];
        $('#customizer .option.selected').each(function() {
          let label = $(this).data('label');
          let image = $(this).data('image');
            let customTitle = $(this).closest('.customization').find('.customization-title').text();
            selecionados.push({ label, image, customTitle });
        });
        let html = selecionados.map(opt => {
          if (opt.image) {
              return `<div class="selected-option-case"><strong>${opt.customTitle}:</strong><div class="selected-option"><img src="${opt.image}" alt="${opt.label}" class="option-image" /> <span>${opt.label}</span></div></div>`;
          } else {
              return `<div class="selected-option-case"><strong>${opt.customTitle}:</strong><div class="selected-option"><span>${opt.label}</span></div></div>`;
          }
        }).join('');
        $('#selected-options .selected-list').html(html);
      }
    }
  }
});
